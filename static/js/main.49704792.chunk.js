(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{47:function(e,t,a){e.exports=a(95)},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),l=(a(52),a(53),a(54),a(55),a(10)),i=a(11),s=a(14),d=a(12),u=a(15),m=(a(56),a(57),function(e){return r.a.createElement("a",{className:"brand",href:"#/brand/".concat(e.brand.id)},r.a.createElement("h1",{className:"p-3 text-center"},e.brand.logo&&r.a.createElement("img",{alt:e.brand.name+" logo",className:"logo",src:e.brand.logo}),e.brand.name))}),b=(a(58),a(13)),p=a(19),f=a.n(p),h=a(22),g=a(23);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={brands:[],brand:null,models:[],model:null},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.SET_BRANDS:return y({},e,{brands:t.value});case j.SET_BRAND:return y({},e,{brand:t.value});case j.SET_MODELS:return y({},e,{models:t.value});case j.SET_MODEL:return y({},e,{model:t.value});default:return e}},j={SET_BRANDS:"SET_BRANDS",SET_BRAND:"SET_BRAND",SET_MODELS:"SET_MODELS",SET_MODEL:"SET_MODEL",API_URL:"https://carcat-3a3fb.web.app"},_=function(e){document.body.setAttribute("brand",e.toLowerCase())},N=Object(h.b)(O),S={getBrands:function(){_(""),N.dispatch({type:j.SET_BRANDS,value:[]}),f.a.get(j.API_URL+"/brand").then((function(e){N.dispatch({type:j.SET_BRANDS,value:e.data})}))},getBrand:function(e){if(N.brand)return!0;N.dispatch({type:j.SET_BRAND,value:null}),f.a.get(j.API_URL+"/brand/"+e).then((function(e){var t=e.data;_(t.name),N.dispatch({type:j.SET_BRAND,value:e.data})}))},getModels:function(e){this.getBrand(e),N.dispatch({type:j.SET_MODELS,value:[]}),f.a.get(j.API_URL+"/model",{params:{brand_id:e}}).then((function(e){N.dispatch({type:j.SET_MODELS,value:e.data})}))},getModel:function(e){var t=this;if(N.model&&N.model.id===e)return!0;f.a.get(j.API_URL+"/model/".concat(e)).then((function(e){var a=e.data;t.getBrand(a.brand_id),N.dispatch({type:j.SET_MODEL,value:a})}))}},k=function(e){return e.children},L=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={search:""},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){S.getBrands()}},{key:"searchChange",value:function(e){this.setState({search:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props.brands;return this.state.search.length>0&&(t=t.filter((function(t){return-1!==t.name.toLowerCase().indexOf(e.state.search.toLowerCase())}))),r.a.createElement(k,null,r.a.createElement("input",{className:"search",placeholder:"\u041f\u043e\u0438\u0441\u043a...",value:this.state.search,onChange:this.searchChange.bind(this)}),r.a.createElement("div",{className:"row brand-list m-0"},r.a.createElement("div",{className:"col-12 p-0"},t.filter((function(e){return e.logo})).map((function(e){return r.a.createElement(m,{key:e.id,brand:e})})),t.filter((function(e){return!e.logo})).map((function(e){return r.a.createElement(m,{key:e.id,brand:e})})))))}}]),t}(r.a.Component),w=Object(b.b)((function(e){return{brands:e.brands}}))(L),D=a(44),P=a(18),B=(a(80),function(e){var t=e.title?r.a.createElement("div",{className:"card-title"},r.a.createElement("span",null,e.title)):null;return r.a.createElement(e.href?"a":"div",{href:e.href,className:"card"},r.a.createElement("div",{className:"card-body"},e.children,t))}),A=function e(t){return"string"===typeof t?t:Array.isArray(t)?e(t[Math.floor(Math.random()*t.length)]):t.hasOwnProperty("gens")?e(t.gens):t.hasOwnProperty("bodies")?e(t.bodies):t.hasOwnProperty("images")?t.images:null},M=function(e){var t=e.size||"",a=A(e.object).replace(".jpg","".concat(t,".jpg")),n={backgroundSize:"cover",backgroundPosition:"center"};return a&&(n.backgroundImage="url(".concat(a,")")),r.a.createElement(k,null,r.a.createElement("img",{onLoad:e.imageLoad,style:{display:"none"},src:a,alt:"some car"}),r.a.createElement("div",{className:"image img-fluid",style:n}))},T=(a(81),a(82),function(e){return r.a.createElement("a",{className:"back-btn",href:e.url},"\u21b5 ",e.text)}),x=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).brands_id=a.props.match.params.brand_id,a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){S.getModels(this.brands_id)}},{key:"imageLoad",value:function(e){e.target.closest(".fader").classList.add("in")}},{key:"render",value:function(){var e=this;return r.a.createElement(k,null,r.a.createElement(T,{url:"#/brand",text:"\u0411\u0440\u044d\u043d\u0434\u044b"}),r.a.createElement("div",{className:"row model-list justify-content-center"},this.props.models.map((function(t){return r.a.createElement("div",{key:t.id,className:"col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2 p-0 fader"},r.a.createElement(B,{title:t.name,href:"#/model/".concat(t.id)},r.a.createElement(M,{size:"m",object:t,imageLoad:e.imageLoad})))}))))}}]),t}(r.a.Component),C=Object(b.b)((function(e){return{models:e.models}}))(x),R=(a(83),a(84),function(e){var t={backgroundImage:"url(".concat(e.image.replace(".jpg","l.jpg"),")")};return r.a.createElement(k,null,r.a.createElement("img",{style:{display:"none"},alt:"some car",src:e.image.replace(".jpg","l.jpg"),onLoad:e.imageLoad}),r.a.createElement("div",{className:"bg-repeater opac",style:t}))}),I=function(e){return r.a.createElement("div",{className:"row gen m-0 position-relative flex-grow-1"},r.a.createElement(R,{image:e.gen.bodies[0].images,imageLoad:e.backLoad}),r.a.createElement("div",{className:"col-12 col-lg-2 title"},r.a.createElement("div",{className:"name"},e.gen.name),r.a.createElement("div",{className:"years"},e.gen.years)),r.a.createElement("div",{className:"col-12 col-lg-10 p-0 body-list"},r.a.createElement("div",{className:"row m-0"},e.gen.bodies.map((function(t){return r.a.createElement("div",{key:t.id,className:"col-12 col-sm-6 col-md-4 p-0 pointer fader",onClick:e.selectBody.bind(null,t.id)},r.a.createElement(B,{title:t.name},r.a.createElement(M,{imageLoad:e.imageLoad,object:t.images,size:"l"})))})))))},U=a(98),z=a(97),J=(a(85),a(46)),q=(a(86),function(e){return r.a.createElement("table",{className:"table table-bordered mods"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u0414\u0432\u0438\u0433\u0430\u0442\u0435\u043b\u044c"),r.a.createElement("th",null,"\u041a\u041f\u041f"),r.a.createElement("th",{className:"d-none d-sm-table-cell"},"\u041f\u0440\u0438\u0432\u043e\u0434"),r.a.createElement("th",null,"\u0420\u0430\u0437\u0433\u043e\u043d \u0434\u043e 100"),r.a.createElement("th",{className:"d-none d-sm-table-cell"},"\u0420\u0430\u0441\u0445\u043e\u0434"))),r.a.createElement("tbody",null,e.mods.reduce((function(e,t){return-1===e.findIndex((function(e){return e.engine+e.gearbox===t.engine+t.gearbox}))?[].concat(Object(J.a)(e),[t]):e}),[]).sort((function(e,t){return e.engine<t.engine?-1:1})).map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.engine),r.a.createElement("td",null,e.gearbox),r.a.createElement("td",{className:"d-none d-sm-table-cell"},e.drive),r.a.createElement("td",null,e.accel),r.a.createElement("td",{className:"d-none d-sm-table-cell"},e.consum))}))))});function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var G=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={modalOpen:!0,mods:null},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.body_id;f.a.get(j.API_URL+"/mods/",{params:{body_id:t}}).then((function(t){e.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.state,{mods:t.data}))}))}},{key:"getBody",value:function(){var e=this;return this.props.model.gens.reduce((function(e,t){return e.concat(t.bodies)}),[]).find((function(t){return t.id===e.props.body_id}))}},{key:"toggle",value:function(){this.setState({modalOpen:!this.state.modalOpen})}},{key:"render",value:function(){var e=this.getBody();return r.a.createElement(U.a,{toggle:this.toggle.bind(this),isOpen:this.state.modalOpen,onClosed:this.props.onClose,className:"modal-lg modal-dialog-centered body-dialog"},r.a.createElement(z.a,null,r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{className:"img-fluid",src:e.images,alt:e.descr})),r.a.createElement("div",{className:"description-container"},r.a.createElement("h3",null,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:"),r.a.createElement("p",null,e.descr),r.a.createElement("div",{className:"justify-content-center d-flex"},r.a.createElement("button",{className:"btn btn-secondary mb-3",onClick:this.toggle.bind(this)},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c")),r.a.createElement("h3",null,"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438:"),this.state.mods&&r.a.createElement(q,{mods:this.state.mods}))))}}]),t}(r.a.Component),H=Object(b.b)((function(e){return{model:e.model}}))(G),K=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).model_id=a.props.match.params.model_id,a.state={body_id:a.props.match.params.body_id?parseInt(a.props.match.params.body_id,10):null},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;S.getModel(this.model_id),window.addEventListener("resize",(function(){e.forceUpdate()}))}},{key:"selectBody",value:function(e){this.addUrl("/model/"+this.model_id+"/"+e),this.setState({body_id:e})}},{key:"closeBody",value:function(){this.addUrl("/model/"+this.model_id+"/"),this.setState({body_id:void 0})}},{key:"addUrl",value:function(e){this.props.history.location.pathname!==e&&this.props.history.push(e)}},{key:"imageLoad",value:function(e){e.target.closest(".fader").classList.add("in")}},{key:"backLoad",value:function(e){e.target.nextSibling.classList.add("in")}},{key:"render",value:function(){var e=this,t=this.props,a=t.brand,n=t.model;return this.props.model&&r.a.createElement(k,null,a&&r.a.createElement(T,{url:"#/brand/"+a.id,text:a.name}),n.id===parseInt(this.model_id,10)&&n.gens.sort((function(e,t){return e.years<t.years?-1:1})).map((function(t){return r.a.createElement(I,{imageLoad:e.imageLoad,backLoad:e.backLoad,model_id:n.id,selectBody:e.selectBody.bind(e),key:t.id,gen:t})})),n&&this.state.body_id&&r.a.createElement(H,{body_id:this.state.body_id,onClose:this.closeBody.bind(this)}))}}]),t}(r.a.Component),Q=Object(b.b)((function(e){return{model:e.model,brand:e.brand}}))(K),V=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(b.a,{store:N},r.a.createElement(D.a,null,r.a.createElement("div",{className:"container-fluid main-container"},r.a.createElement(P.d,null,r.a.createElement(P.b,{exact:!0,path:"/model/:model_id/:body_id?",component:Q}),r.a.createElement(P.b,{exact:!0,path:"/brand/:brand_id",component:C}),r.a.createElement(P.b,{exact:!0,path:"/brand",component:w}),r.a.createElement(P.b,{path:"*",render:function(){return r.a.createElement(P.a,{to:"/brand"})}})))))}}]),t}(n.Component);o.a.render(r.a.createElement(V,null),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.49704792.chunk.js.map